---
layout: post
title: "Week15_2_AWS_Node-red"
subtitle: AWS_Node-red
thumbnail-img: "https://github.com/yejin0509/yejin0509.github.io/assets/63178658/0111b33e-653f-464e-b514-b93b43027361"
tag: Smart_Device
---



<br><br>
<br><br>

## 0️⃣  AWS
<hr/>
<br>
<br><br>
### ▶️ AWS IoT Core<br><br>
#### Core로부터 받은 데이터를 처리해주는 서비스
#### IoT 디바이스를 AWS에서 관리


<br><br>
<br><br>
<br><br>

## 1️⃣ AWS와 Node-RED 연결  
<hr/>
<br>
<br><br>
<br><br>
### 전주차 작성했던 AWS Iot core를 통해 Node-red에 접속 가능<br><br>
### 1. AWS IOT core에서 정책 변경<br><br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/56afc928-8894-4e5e-8a9e-4362dd4803bc)<br><br>


#### * 는 모든 작업을 허용함.

<br><br>
<br><br>
### 2. Node-RED 실행 후 inject 추가 후 '테스트'입력 <br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/00b4c807-fbcc-4590-9fbb-d3399da1cebc)<br>
<br>

<br><br>
<br><br>
### 3. mqtt-out 노드 추가 후 설정<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/3e41e2e7-6911-4836-b936-9aa413d9d6dd)<br><br>
#### 1) 서버란에 AWS 엔드포인트<br>
#### 2) 토픽 원하는 단어로 지정<br>
#### 3) QoS 0으로 설정<br>
#### 4) 보존 사용하지 않음 설정 <br>
<br><br>
<br><br>

### 4. mqtt-out -> mqtt-broker 설정<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/7712c940-21b7-4175-983a-899d856ca8dd)<br><br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/4a2c6757-e438-4fd2-9db7-37be722db8f3)<br><br>
#### 1) 포트 8883 설정<br>
#### 2) TLS 사용하여 순서대로 인증키 / 프라이빗키 / CA1 파일 업로<br>
<br><br>
<br><br>
### 5. 노드 연결<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/26dd0835-1028-471a-bac1-bbcfa4379c15)
<br><br>
<br><br>

### 6. mqtt-in 노드 추가 후 mqtt-out노드와 같이 설정<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/e62edc23-6d8b-4f0b-8f7d-0900fe99a08c)
<br><br>
<br><br>

### 7. debug 노드 추가 후 mqtt-in과 연결<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/ee70cfa4-819a-41e1-a7cd-6210a5eeb428)
<br><br>

<br><br>
<br><br>
### 8. AWS Mqtt 테스트 클라이언트에서 Node-RED에서 설정한 topic 구독<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/ace78bc2-0698-4dbe-8198-e5552b11242a)
<br><br>

<br><br>
<br><br>
### 9. Node-RED에서 inject 클릭하여 AWS MQTT 테스트 클라이언트에서 확인<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/cb91dfe6-d2ff-40bd-93a6-5315e3d3a099)
<br><br>
<br><br>
<br><br>
### 10. Node-RED debug창에서도 확인<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/cecf2e7d-d17d-44ff-9b63-ed57424e098f)
<br><br>
<br><br>
<br><br>


### 11. AWS에서 주제게시 탭에서 게시를 통해 노드레드에서 출력 값 확인<br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/65cf7863-e91b-4b7e-934a-57010e5c472f)<br><br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/c5b6dc48-e9b4-4202-a413-f585455998ea)<br><br>
![image](https://github.com/yejin0509/yejin0509.github.io/assets/63178658/52ad504a-99c6-4230-828a-22ffb64e47c4)<br><br>
<br><br><br><br>


<br><br><br><br><br><br>
#### 참고
https://velog.io/@markyang92/AWS-IoT-Core-IoT-Core-%EC%83%9D%EC%84%B1-node-red-%EC%97%B0%EB%8F%99
<br><br>
<br><br>
<br><br>
<br><br>
